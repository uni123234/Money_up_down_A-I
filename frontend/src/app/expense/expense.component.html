<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <base href="/expense/" />
    <title>Table with Modal</title>
    <style>
        .gradient-custom {
            background: linear-gradient(to right, #6a11cb, #2575fc);
        }
        .vh-100 {
            height: 100vh;
        }
        .modal-content {
            background-color: #343a40;
            color: white;
        }
        .modal-header, .modal-footer {
            border-color: #454d55;
        }
        .form-control {
            background-color: #454d55;
            color: white;
            border-color: #6c757d;
        }
        .form-control:focus {
            background-color: #454d55;
            color: white;
            border-color: #6c757d;
        }
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }
        .card-header {
            background-color: #212529;
            border-bottom-color: #454d55;
        }
        .card-body {
            background-color: #212529;
        }
        .table thead th {
            background-color: #343a40;
            color: white;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: #2c3034;
        }
    </style>
</head>
<body>
<section class="gradient-custom d-flex justify-content-center align-items-center vh-100">
  <div class="col">
    <div class="card border mt-4">
      <div class="card-header bg-dark text-white border-bottom">
        <h5 class="card-title">Ваша таблиця</h5>
      </div>
      <div class="card-body bg-dark">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <button class="btn btn-primary" onclick="prevMonth()"><i class="fa fa-chevron-left"></i></button>
          <h4 class="text-white mb-0" id="currentMonthDisplay"></h4>
          <button class="btn btn-primary" onclick="nextMonth()"><i class="fa fa-chevron-right"></i></button>
        </div>
        <div class="table-responsive">
          <table class="table table-condensed table-striped">
            <thead>
              <tr>
                <th>Ім'я</th>
                <th>Дата</th>
                <th>Сума</th>
                <th>Категорія</th>
                <th>Опис</th>
              </tr>
            </thead>
            <tbody id="expenseTableBody">
              <tr data-toggle="collapse" data-target="#demo1" class="accordion-toggle">
                <td>Carlos</td>
                <td>Fri, 17 May 2024 00:00:00 GMT</td>
                <td>115</td>
                <td>Їжа</td>
                <td>Mathias</td>
              </tr>
              <tr>
                <td colspan="5" class="hiddenRow">
                  <div class="accordian-body collapse" id="demo1">
                    <table class="table table-dark table-striped">
                      <thead class="thead-light">
                        <tr>
                          <th>Дата</th>
                          <th>Сума</th>
                          <th>Категорія</th>
                          <th>Опис</th>
                        </tr>
                      </thead>
                      <tbody class="customtable">
                        <tr *ngFor="let item of dataList">
                          <td>{{ item.date }}</td>
                          <td>{{ item.amount }}</td>
                          <td>{{ item.category }}</td>
                          <td>{{ item.description }}</td>
                          <td><button class="edit-btn" onclick="editExpense(item)" data-toggle="modal" data-target="#editModal"><i class="fa fa-pencil"></i></button></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>
<router-outlet></router-outlet>

<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Редагувати витрати</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="editForm">
          <div class="form-group">
            <label for="editDate">Дата</label>
            <input type="date" class="form-control" id="editDate" required>
          </div>
          <div class="form-group">
            <label for="editAmount">Сума</label>
            <input type="number" class="form-control" id="editAmount" required>
          </div>
          <div class="form-group">
            <label for="editCategory">Категорія</label>
            <select class="form-control" id="editCategory" required>
              <option value="Food">Їжа</option>
              <option value="Transport">Транспорт</option>
              <option value="Entertainment">Розваги</option>
              <option value="Utilities">Комунальні послуги</option>
              <option value="Other">Інше</option>
            </select>
          </div>
          <div class="form-group">
            <label for="editDescription">Опис</label>
            <textarea class="form-control" id="editDescription" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Зберегти зміни</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  let currentMonth = new Date();
  const monthNames = ["Січень", "Лютий", "Березень", "Квітень", "Травень", "Червень", 
                      "Липень", "Серпень", "Вересень", "Жовтень", "Листопад", "Грудень"];

  function updateMonthDisplay() {
    document.getElementById('currentMonthDisplay').textContent = 
      `${monthNames[currentMonth.getMonth()]} ${currentMonth.getFullYear()}`;
  }

  function prevMonth() {
    currentMonth.setMonth(currentMonth.getMonth() - 1);
    updateMonthDisplay();
    loadDataForMonth(currentMonth);
  }

  function nextMonth() {
    currentMonth.setMonth(currentMonth.getMonth() + 1);
    updateMonthDisplay();
    loadDataForMonth(currentMonth);
  }

  function loadDataForMonth(month) {
  }

  function editExpense(item) {
    document.getElementById('editDate').value = item.date;
    document.getElementById('editAmount').value = item.amount;
    document.getElementById('editCategory').value = item.category;
    document.getElementById('editDescription').value = item.description;
    $('#editModal').modal('show');
  }

  document.getElementById('editForm').addEventListener('submit', function(event) {
    event.preventDefault();
    $('#editModal').modal('hide');
  });

  document.addEventListener('DOMContentLoaded', function() {
    updateMonthDisplay();
  });
</script>
</body>
</html>
